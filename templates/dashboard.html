{% extends "base.html" %}

{% block title %}Dashboard - Control Host{% endblock %}

{% block content %}
<section class="py-5 bg-light">
  <div class="container py-4">

    <div class="mb-4">
      <h1 class="display-6 fw-bold mb-2">Bienvenido, {{ current_user.email or 'Usuario' }}! </h1>
    </div>

    <div class="row g-3 mb-4">
      <div class="col-md-3 col-sm-6">
        <div class="card h-100 shadow-sm border-0">
          <div class="card-body">
            <div class="d-flex justify-content-between align-items-center mb-2 text-muted">
              <span>Equipos Totales</span>
              <img src="/static/images/svgs/computer-icon.svg" alt="Computer icon svg"style="max-width: 20px; max-height: 20px;">
            </div>
            <p class="h2 fw-bold text-dark mb-0">{{ total_computers }}</p>
          </div>
        </div>
      </div>
      <div class="col-md-3 col-sm-6">
        <div class="card h-100 shadow-sm border-0">
          <div class="card-body">
            <div class="d-flex justify-content-between align-items-center mb-2 text-muted">
              <span>Tu Rol</span>
              <img src="/static/images/svgs/permissions-icon.svg" alt="Permissions icon svg" style="max-width: 20px; max-height: 20px;">
            </div>
            <p class="h2 fw-bold text-dark mb-0">
              {% if current_user.has_role('admin') %}
                Admin
              {% else %}
                Usuario
              {% endif %}
            </p>
          </div>
        </div>
      </div>
      {% if current_user.has_role('admin') %}
      <div class="col-md-3 col-sm-6">
        <div class="card h-100 shadow-sm border-0">
          <div class="card-body">
            <div class="d-flex justify-content-between align-items-center mb-2 text-muted">
              <span>Total usuarios</span>
              <img src="/static/images/svgs/users-icon.svg" alt="Users icon svg" style="max-width: 20px; max-height: 20px;">
            </div>
            <p class="h2 fw-bold text-dark mb-0">{{ total_users }}</p>
          </div>
        </div>
      </div>
      {% endif %}
      <div class="col-md-3 col-sm-6">
        <div class="card h-100 shadow-sm border-0">
          <div class="card-body">
            <div class="d-flex justify-content-between align-items-center mb-2 text-muted">
              <span>Estado del Sistema</span>
              <img src="/static/images/svgs/system-status-icon.svg" alt="System status icon svg" style="max-width: 20px; max-height: 20px;">
            </div>
            <p class="h2 fw-bold text-success mb-0">Online</p>
          </div>
        </div>
      </div>
    </div>

    <div class="row g-3 mb-4">
      <div class="col-md-6">
        <div class="card h-100 shadow-sm border-0">
          <div class="card-body">
            <h5 class="fw-bold mb-3">Acciones Rápidas</h5>
            <div class="list-group list-group-flush">
              <a href="{{ url_for('computers_area') }}" class="list-group-item list-group-item-action d-flex align-items-center gap-3">
                <img src="/static/images/svgs/computer-icon.svg" alt="Computer icon svg"style="max-width: 20px; max-height: 20px;">
                <span>Ver Todos los Equipos</span>
              </a>
              {% if current_user.has_role('admin') %}
              <a href="{{ url_for('computer_new') }}" class="list-group-item list-group-item-action d-flex align-items-center gap-3">
                <img src="/static/images/svgs/add-computer-icon.svg" alt="Add computer icon svg"style="max-width: 20px; max-height: 20px;">
                <span>Añadir Nuevo Equipo</span>
              </a>
              {% endif %}
            </div>
          </div>
        </div>
      </div>
      <div class="col-md-6">
        <div class="card h-100 shadow-sm border-0">
          <div class="card-body">
            <h5 class="fw-bold mb-3">Información de Cuenta</h5>
            <div class="vstack gap-3">
              <div class="d-flex gap-3 align-items-start">
                <img src="/static/images/svgs/mail-icon.svg" alt="Mail svg" style="max-width: 20px; max-height: 20px;" class="mt-1">
                <div>
                  <p class="mb-1 fw-semibold text-muted small">Correo Electrónico</p>
                  <p class="mb-0 fw-bold">{{ current_user.email }}</p>
                </div>
              </div>
              <div class="d-flex gap-3 align-items-start">
                <img src="/static/images/svgs/permissions-icon.svg" alt="Permissions svg" style="max-width: 20px; max-height: 20px;" class="mt-1">
                <div>
                  <p class="mb-1 fw-semibold text-muted small">Nivel de Permisos</p>
                  <p class="mb-0 fw-bold">
                    {% if current_user.has_role('admin') %}
                      <span class="badge bg-danger">Administrador</span>
                    {% else %}
                      <span class="badge bg-info">Usuario</span>
                    {% endif %}
                  </p>
                </div>
              </div>
              <div class="d-flex gap-3 align-items-start">
                {% if current_user.active %}
                <img src="/static/images/svgs/status-connected-icon.svg" alt="Conected icon svg" style="max-width: 20px; max-height: 20px;" class="mt-1">
                {% else %}
                <img src="/static/images/svgs/status-disconnected-icon.svg" alt="Disconnected icon svg" style="max-width: 20px; max-height: 20px;" class="mt-1">
                {% endif %}
                <div>
                  <p class="mb-1 fw-semibold text-muted small">Estado</p>
                  <p class="mb-0 fw-bold">
                    {% if current_user.active %}
                      <span class="badge bg-success">Activo</span>
                    {% else %}
                      <span class="badge bg-secondary">Inactivo</span>
                    {% endif %}
                  </p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="card shadow-sm border-0 mb-4">
      <div class="card-body">
        <h5 class="fw-bold mb-3"> Acerca de Control Host</h5>
        <p class="text-muted mb-2">
          <strong>Control Host</strong> es una aplicación de gestión remota de equipos desarrollada como proyecto 
          de la asignatura de Lenguaje de Marcas. Permite monitorear, controlar y administrar equipos remotamente 
          desde una interfaz web centralizada.
        </p>
        <p class="text-muted mb-0">
        </p>
          Con Control Host puedes ver el estado de tus equipos, capturar pantallas, bloquear acceso, suspender 
          o reiniciar máquinas, y gestionar sitios web bloqueados de forma centralizada.
        </p>
      </div>    </div>
    </div>
    </div>
  </div>
</section>
{% endblock %}
